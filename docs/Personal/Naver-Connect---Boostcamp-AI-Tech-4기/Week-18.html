<!DOCTYPE html>
<html lang="en"><head><title>Week 18</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;family=IBM Plex Mono:wght@400;600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="HyeongSeok Kim's Vault"/><meta property="og:title" content="Week 18"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Week 18"/><meta name="twitter:description" content="Docker Docker 소개 Docker Image 저장 &amp; 배포 Docker Compose Logging Logging Basics Logging in python Online Serving Logging(Big Query) BentoML Intro BentoML 소개 BentoML 특징 BentoML 설치 BentoML 사용 Flow BentoML Artifact Metadata 접근 방법 BentoML API Functions, Adapters Retrieving BentoService Airflow Apach Ai..."/><meta property="og:description" content="Docker Docker 소개 Docker Image 저장 &amp; 배포 Docker Compose Logging Logging Basics Logging in python Online Serving Logging(Big Query) BentoML Intro BentoML 소개 BentoML 특징 BentoML 설치 BentoML 사용 Flow BentoML Artifact Metadata 접근 방법 BentoML API Functions, Adapters Retrieving BentoService Airflow Apach Ai..."/><meta property="og:image:alt" content="Docker Docker 소개 Docker Image 저장 &amp; 배포 Docker Compose Logging Logging Basics Logging in python Online Serving Logging(Big Query) BentoML Intro BentoML 소개 BentoML 특징 BentoML 설치 BentoML 사용 Flow BentoML Artifact Metadata 접근 방법 BentoML API Functions, Adapters Retrieving BentoService Airflow Apach Ai..."/><meta property="twitter:domain" content="quartz.jzhao.xyz"/><meta property="og:url" content="https://quartz.jzhao.xyz/Personal/Naver-Connect---Boostcamp-AI-Tech-4기/Week-18"/><meta property="twitter:url" content="https://quartz.jzhao.xyz/Personal/Naver-Connect---Boostcamp-AI-Tech-4기/Week-18"/><link rel="icon" href="../../static/icon.png"/><meta name="description" content="Docker Docker 소개 Docker Image 저장 &amp; 배포 Docker Compose Logging Logging Basics Logging in python Online Serving Logging(Big Query) BentoML Intro BentoML 소개 BentoML 특징 BentoML 설치 BentoML 사용 Flow BentoML Artifact Metadata 접근 방법 BentoML API Functions, Adapters Retrieving BentoService Airflow Apach Ai..."/><meta name="generator" content="Quartz"/><link href="../../index.css" rel="stylesheet" type="text/css" spa-preserve/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  padding: 2rem;
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL2hvbWUvcnVubmVyL3dvcmsvdmF1bHQuaHllb25nc2Vvay1raW0vdmF1bHQuaHllb25nc2Vvay1raW0vcXVhcnR6L3F1YXJ0ei9jb21wb25lbnRzL3N0eWxlcyIsInNvdXJjZXMiOlsibWVybWFpZC5pbmxpbmUuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTs7O0FBS0Y7RUFDRTtFQUNBOzs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFJSjtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTs7QUFJRjtFQUNFO0VBQ0E7RUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi5leHBhbmQtYnV0dG9uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbG9hdDogcmlnaHQ7XG4gIHBhZGRpbmc6IDAuNHJlbTtcbiAgbWFyZ2luOiAwLjNyZW07XG4gIHJpZ2h0OiAwOyAvLyBOT1RFOiByaWdodCB3aWxsIGJlIHNldCBpbiBtZXJtYWlkLmlubGluZS50c1xuICBjb2xvcjogdmFyKC0tZ3JheSk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tZGFyayk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0KTtcbiAgYm9yZGVyOiAxcHggc29saWQ7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgb3BhY2l0eTogMDtcbiAgdHJhbnNpdGlvbjogMC4ycztcblxuICAmID4gc3ZnIHtcbiAgICBmaWxsOiB2YXIoLS1saWdodCk7XG4gICAgZmlsdGVyOiBjb250cmFzdCgwLjMpO1xuICB9XG5cbiAgJjpob3ZlciB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTtcbiAgfVxuXG4gICY6Zm9jdXMge1xuICAgIG91dGxpbmU6IDA7XG4gIH1cbn1cblxucHJlIHtcbiAgJjpob3ZlciA+IC5leHBhbmQtYnV0dG9uIHtcbiAgICBvcGFjaXR5OiAxO1xuICAgIHRyYW5zaXRpb246IDAuMnM7XG4gIH1cbn1cblxuI21lcm1haWQtY29udGFpbmVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICBjb250YWluOiBsYXlvdXQ7XG4gIHotaW5kZXg6IDk5OTtcbiAgbGVmdDogMDtcbiAgdG9wOiAwO1xuICB3aWR0aDogMTAwdnc7XG4gIGhlaWdodDogMTAwdmg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGRpc3BsYXk6IG5vbmU7XG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cig0cHgpO1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG5cbiAgJi5hY3RpdmUge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgfVxuXG4gICYgPiAjbWVybWFpZC1zcGFjZSB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHRncmF5KTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodCk7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB0b3A6IDUwJTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgaGVpZ2h0OiA4MHZoO1xuICAgIHdpZHRoOiA4MHZ3O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgICAmID4gLm1lcm1haWQtY29udGVudCB7XG4gICAgICBwYWRkaW5nOiAycmVtO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCAwO1xuICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMXMgZWFzZTtcbiAgICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICAgICAgbWluLWhlaWdodDogMjAwcHg7XG4gICAgICBtaW4td2lkdGg6IDIwMHB4O1xuXG4gICAgICBwcmUge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIH1cblxuICAgICAgc3ZnIHtcbiAgICAgICAgbWF4LXdpZHRoOiBub25lO1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICB9XG4gICAgfVxuXG4gICAgJiA+IC5tZXJtYWlkLWNvbnRyb2xzIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGJvdHRvbTogMjBweDtcbiAgICAgIHJpZ2h0OiAyMHB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGdhcDogOHB4O1xuICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQpO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICB6LWluZGV4OiAyO1xuXG4gICAgICAubWVybWFpZC1jb250cm9sLWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saWdodCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1kYXJrKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgZm9udC1mYW1pbHk6IHZhcigtLWJvZHlGb250KTtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcblxuICAgICAgICAmOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saWdodGdyYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgJjphY3RpdmUge1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxcHgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3R5bGUgdGhlIHJlc2V0IGJ1dHRvbiBkaWZmZXJlbnRseVxuICAgICAgICAmOm50aC1jaGlsZCgyKSB7XG4gICAgICAgICAgd2lkdGg6IGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMCAxMnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19 */</style><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../../static/contentIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://quartz.jzhao.xyz/index.xml"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image" content="https://quartz.jzhao.xyz/Personal/Naver-Connect---Boostcamp-AI-Tech-4기/Week-18-og-image.webp"/><meta property="og:image:url" content="https://quartz.jzhao.xyz/Personal/Naver-Connect---Boostcamp-AI-Tech-4기/Week-18-og-image.webp"/><meta name="twitter:image" content="https://quartz.jzhao.xyz/Personal/Naver-Connect---Boostcamp-AI-Tech-4기/Week-18-og-image.webp"/><meta property="og:image:type" content="image/.webp"/></head><body data-slug="Personal/Naver-Connect---Boostcamp-AI-Tech-4기/Week-18"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="../..">HyeongSeok Kim's Vault</a></h2><div class="spacer mobile-only"></div><div class="flex-component" style="flex-direction: row; flex-wrap: nowrap; gap: 1rem;"><div style="flex-grow: 1; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><div class="search"><button class="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div class="search-container"><div class="search-space"><input autocomplete="off" class="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div class="search-layout" data-preview="true"></div></div></div></div></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="readermode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="readerIcon" fill="currentColor" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round" width="64px" height="64px" viewBox="0 0 24 24" aria-label="Reader mode"><title>Reader mode</title><g transform="translate(-1.8, -1.8) scale(1.15, 1.2)"><path d="M8.9891247,2.5 C10.1384702,2.5 11.2209868,2.96705384 12.0049645,3.76669482 C12.7883914,2.96705384 13.8709081,2.5 15.0202536,2.5 L18.7549359,2.5 C19.1691495,2.5 19.5049359,2.83578644 19.5049359,3.25 L19.5046891,4.004 L21.2546891,4.00457396 C21.6343849,4.00457396 21.9481801,4.28672784 21.9978425,4.6528034 L22.0046891,4.75457396 L22.0046891,20.25 C22.0046891,20.6296958 21.7225353,20.943491 21.3564597,20.9931534 L21.2546891,21 L2.75468914,21 C2.37499337,21 2.06119817,20.7178461 2.01153575,20.3517706 L2.00468914,20.25 L2.00468914,4.75457396 C2.00468914,4.37487819 2.28684302,4.061083 2.65291858,4.01142057 L2.75468914,4.00457396 L4.50368914,4.004 L4.50444233,3.25 C4.50444233,2.87030423 4.78659621,2.55650904 5.15267177,2.50684662 L5.25444233,2.5 L8.9891247,2.5 Z M4.50368914,5.504 L3.50468914,5.504 L3.50468914,19.5 L10.9478955,19.4998273 C10.4513189,18.9207296 9.73864328,18.5588115 8.96709342,18.5065584 L8.77307039,18.5 L5.25444233,18.5 C4.87474657,18.5 4.56095137,18.2178461 4.51128895,17.8517706 L4.50444233,17.75 L4.50368914,5.504 Z M19.5049359,17.75 C19.5049359,18.1642136 19.1691495,18.5 18.7549359,18.5 L15.2363079,18.5 C14.3910149,18.5 13.5994408,18.8724714 13.0614828,19.4998273 L20.5046891,19.5 L20.5046891,5.504 L19.5046891,5.504 L19.5049359,17.75 Z M18.0059359,3.999 L15.0202536,4 L14.8259077,4.00692283 C13.9889509,4.06666544 13.2254227,4.50975805 12.7549359,5.212 L12.7549359,17.777 L12.7782651,17.7601316 C13.4923805,17.2719483 14.3447024,17 15.2363079,17 L18.0059359,16.999 L18.0056891,4.798 L18.0033792,4.75457396 L18.0056891,4.71 L18.0059359,3.999 Z M8.9891247,4 L6.00368914,3.999 L6.00599909,4.75457396 L6.00599909,4.75457396 L6.00368914,4.783 L6.00368914,16.999 L8.77307039,17 C9.57551536,17 10.3461406,17.2202781 11.0128313,17.6202194 L11.2536891,17.776 L11.2536891,5.211 C10.8200889,4.56369974 10.1361548,4.13636104 9.37521067,4.02745763 L9.18347055,4.00692283 L8.9891247,4 Z"></path></g></svg></button></div></div><div class="explorer" data-behavior="link" data-collapsed="collapsed" data-savestate="true" data-data-fns="{&quot;order&quot;:[&quot;filter&quot;,&quot;map&quot;,&quot;sort&quot;],&quot;sortFn&quot;:&quot;(a,b)=>!a.isFolder&amp;&amp;!b.isFolder||a.isFolder&amp;&amp;b.isFolder?a.displayName.localeCompare(b.displayName,void 0,{numeric:!0,sensitivity:\&quot;base\&quot;}):!a.isFolder&amp;&amp;b.isFolder?1:-1&quot;,&quot;filterFn&quot;:&quot;node=>node.slugSegment!==\&quot;tags\&quot;&quot;,&quot;mapFn&quot;:&quot;node=>node&quot;}"><button type="button" class="explorer-toggle mobile-explorer hide-until-loaded" data-mobile="true" aria-controls="explorer-content"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button type="button" class="title-button explorer-toggle desktop-explorer" data-mobile="false" aria-expanded="true"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div class="explorer-content" aria-expanded="false"><ul class="explorer-ul overflow" id="list-0"><li class="overflow-end"></li></ul></div><template id="template-file"><li><a href="#"></a></li></template><template id="template-folder"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div><button class="folder-button"><span class="folder-title"></span></button></div></div><div class="folder-outer"><ul class="content"></ul></div></li></template></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../Personal/">Personal</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../Personal/Naver-Connect---Boostcamp-AI-Tech-4기/">Naver Connect   Boostcamp AI Tech 4기</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>Week 18</a></div></nav><h1 class="article-title">Week 18</h1><p show-comma="true" class="content-meta"><time datetime="2025-06-17T08:48:27.125Z">Jun 17, 2025</time><span>19 min read</span></p></div></div><article class="popover-hint"><ul>
<li><a href="#docker" class="internal alias">Docker</a>
<ul>
<li><a href="#docker-%EC%86%8C%EA%B0%9C" class="internal alias">Docker 소개</a></li>
<li><a href="#docker-image-%EC%A0%80%EC%9E%A5--%EB%B0%B0%ED%8F%AC" class="internal alias">Docker Image 저장 &amp; 배포</a></li>
<li><a href="#docker-compose" class="internal alias">Docker Compose</a></li>
</ul>
</li>
<li><a href="#logging" class="internal alias">Logging</a>
<ul>
<li><a href="#logging-basics" class="internal alias">Logging Basics</a></li>
<li><a href="#logging-in-python" class="internal alias">Logging in python</a></li>
<li><a href="#online-serving-loggingbig-query" class="internal alias">Online Serving Logging(Big Query)</a></li>
</ul>
</li>
<li><a href="#bentoml" class="internal alias">BentoML</a>
<ul>
<li><a href="#intro" class="internal alias">Intro</a></li>
<li><a href="#bentoml-%EC%86%8C%EA%B0%9C" class="internal alias">BentoML 소개</a></li>
<li><a href="#bentoml-%ED%8A%B9%EC%A7%95" class="internal alias">BentoML 특징</a></li>
<li><a href="#bentoml-%EC%84%A4%EC%B9%98" class="internal alias">BentoML 설치</a></li>
<li><a href="#bentoml-%EC%82%AC%EC%9A%A9-flow" class="internal alias">BentoML 사용 Flow</a></li>
<li><a href="#bentoml-artifact-metadata-%EC%A0%91%EA%B7%BC-%EB%B0%A9%EB%B2%95" class="internal alias">BentoML Artifact Metadata 접근 방법</a></li>
<li><a href="#bentoml-api-functions-adapters" class="internal alias">BentoML API Functions, Adapters</a></li>
<li><a href="#retrieving-bentoservice" class="internal alias">Retrieving BentoService</a></li>
</ul>
</li>
<li><a href="#airflow" class="internal alias">Airflow</a>
<ul>
<li><a href="#apach-airflow-%EC%86%8C%EA%B0%9C" class="internal alias">Apach Airflow 소개</a></li>
<li><a href="#apach-airflow-%EC%84%A4%EC%B9%98" class="internal alias">Apach Airflow 설치</a></li>
<li><a href="#apach-airflow-%EC%82%AC%EC%9A%A9" class="internal alias">Apach Airflow 사용</a></li>
<li><a href="#dag%EC%99%80-task" class="internal alias">DAG와 Task</a></li>
<li><a href="#apach-airflow-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98%EC%99%80-%ED%99%9C%EC%9A%A9%EB%B0%A9%EC%95%88" class="internal alias">Apach Airflow 아키텍처와 활용방안</a></li>
</ul>
</li>
<li><a href="#ml-design-pattern" class="internal alias">ML Design Pattern</a>
<ul>
<li><a href="#serving-%ED%8C%A8%ED%84%B4" class="internal alias">Serving 패턴</a></li>
</ul>
</li>
</ul>
<hr/>
<h1 id="docker">Docker<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#docker" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<h2 id="docker-소개">Docker 소개<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#docker-소개" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>
<p>SW 가상화</p>
<ul>
<li>서버 환경까지 소프트웨어화를 할 수 없을까에 대한 고민
<ul>
<li>관리해야 하는 환경이 늘어날 수록 고민은 커짐</li>
</ul>
</li>
<li>특정 SW 환경을 만들고 Local, Production Server에서 그대로 활용</li>
</ul>
</li>
<li>
<p>VM</p>
<ul>
<li>OS를 포함한 가상화 SW → OS 위에 OS… 많은 리소스 사용</li>
</ul>
</li>
<li>
<p>Container</p>
<ul>
<li>OS가 아닌 그 위에 SW 환경만 가상화, VM보다 훨신 가볍다</li>
<li>Container 기술을 쉽게 사용할 수 있도록 나온 도구가 바로 Docker</li>
</ul>
</li>
<li>
<p>VM vs Contrainers</p>
<blockquote class="callout info" data-callout="info">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>Containers vs Virtual Machines | Atlassian <br/>
Which option is better for you?<br/>
<a href="https://www.atlassian.com/microservices/cloud-computing/containers-vs-vms" class="external">https://www.atlassian.com/microservices/cloud-computing/containers-vs-vms<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p></div>
                  
                </div>
</blockquote>
<p><img src="../../resources/Untitled-67.png" width="auto" height="auto" alt="Untitled 67.png"/></p>
</li>
<li>
<p>Docker Image(Read-only)</p>
<ul>
<li>컨테이너 생성에 사용하는 템플릿</li>
</ul>
</li>
<li>
<p>Docker Container</p>
<ul>
<li>Docker Image를 사용해 생성한 인스턴스</li>
</ul>
</li>
<li>
<p>다른 사람이 만든 SW를 바로 가져와서 사용할 수 있음</p>
<ul>
<li>ex: MySQL, Jupyter Notebook</li>
</ul>
</li>
</ul>
<h2 id="docker-image-저장--배포">Docker Image 저장 &amp; 배포<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#docker-image-저장--배포" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>Docker Image 저장소
<ul>
<li>Docker Hub</li>
<li>GCR</li>
<li>ECR</li>
</ul>
</li>
<li>Docker Image 배포
<ul>
<li>이미지를 서버에 배포하는 가장 간단한 방법 : Cloud 서비스 활용</li>
<li>GCP : Cloud Run
<ul>
<li>GCR에 올린 url을 넘겨주면 간단히 생성 가능</li>
</ul>
</li>
<li>AWS : ECS</li>
</ul>
</li>
<li>GCP Compute Engine에 Docker 이미지 배포하기 &amp; Github action 연동
<ul>
<li>Compute Engine 인스턴스 실행 시 Docker Image를 가지고 실행하도록 설정 가능</li>
<li>Github Action을 사용해 Docker Image Push 자동화 가능</li>
<li>IAM(Identity Access Management) 설정 필요
<ul>
<li>클라우스 서비스 접근 권한을 관리하는 서비스</li>
<li>서비스 계정 생성</li>
<li>서비스 계정→키 생성 가능(노출주의)</li>
</ul>
</li>
<li>내 project의 github repos 접속
<ul>
<li>Secret에 GCP Project ID추가(GCP 대시보드 참조)</li>
<li>Secret에 GCP Instance 이름 추가</li>
<li>Secret에 GCP Instance의 Zone 추가</li>
</ul>
</li>
<li>GCP 접속, Compute Engine 생성
<ul>
<li>이름과 Zone은 secret과 일치시켜 입력</li>
<li>Deploy Container 클릭</li>
<li>GCR에 Push한 Container Image 선택</li>
<li>네트워크 태그 추가 : streamlit</li>
</ul>
</li>
<li>외부 ip로 접속 시, streamlit page를 볼 수 있음</li>
<li>github action으로 이미지 배포 자동화
<ul>
<li>
<p>deploy_docker.yml</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="YAML" data-theme="github-dark"><code data-language="YAML" data-theme="github-dark" style="display:grid;"><span data-line><span>name: Build and Deploy to Google Compute Engine</span></span>
<span data-line> </span>
<span data-line><span>on:</span></span>
<span data-line><span>  push:</span></span>
<span data-line><span>      branches: [ main ]</span></span>
<span data-line><span>      paths:</span></span>
<span data-line><span>        - 'part2/04-cicd/**'</span></span>
<span data-line> </span>
<span data-line><span>env:</span></span>
<span data-line><span>  PROJECT_ID: ${{ secrets.GCP_PROJECT_ID }}</span></span>
<span data-line><span>  DOCKER_IMAGE_NAME: streamlit</span></span>
<span data-line><span>  GCE_INSTANCE: ${{ secrets.GCE_INSTANCE }}</span></span>
<span data-line><span>  GCE_INSTANCE_ZONE: ${{ secrets.GCE_INSTANCE_ZONE }}</span></span>
<span data-line> </span>
<span data-line><span>jobs:</span></span>
<span data-line><span>  setup-build-publish-deploy:</span></span>
<span data-line><span>    name: Setup, Build, Publish, and Deploy</span></span>
<span data-line><span>    runs-on: ubuntu-latest</span></span>
<span data-line> </span>
<span data-line><span>    steps:</span></span>
<span data-line><span>    - name: Checkout</span></span>
<span data-line><span>      uses: actions/checkout@v2</span></span>
<span data-line> </span>
<span data-line><span>    # gcloud CLI 설정</span></span>
<span data-line><span>    - uses: google-github-actions/setup-gcloud@master</span></span>
<span data-line><span>      with:</span></span>
<span data-line><span>        version: '290.0.1'</span></span>
<span data-line><span>        service_account_key: ${{ secrets.SERVICE_ACCOUNT_KEY }}</span></span>
<span data-line><span>        project_id: ${{ secrets.GCP_PROJECT_ID }}</span></span>
<span data-line> </span>
<span data-line><span>    # gcloud에서 Docker 사용할 수 있도록 설정</span></span>
<span data-line><span>    - run: |-</span></span>
<span data-line><span>        gcloud --quiet auth configure-docker</span></span>
<span data-line> </span>
<span data-line><span>    # Model 파일 복사</span></span>
<span data-line><span>    - name: Copy model file</span></span>
<span data-line><span>      run: |</span></span>
<span data-line><span>        cd part2/04-cicd</span></span>
<span data-line><span>        sh copy_asset.sh</span></span>
<span data-line> </span>
<span data-line><span>    # Docker Image Build</span></span>
<span data-line><span>    - name: Build</span></span>
<span data-line><span>      run: |-</span></span>
<span data-line><span>        docker build part2/04-cicd --tag &quot;gcr.io/$PROJECT_ID/$DOCKER_IMAGE_NAME:$GITHUB_SHA&quot;</span></span>
<span data-line> </span>
<span data-line><span>    # Docker Image Push</span></span>
<span data-line><span>    - name: Publish</span></span>
<span data-line><span>      run: |-</span></span>
<span data-line><span>        docker push &quot;gcr.io/$PROJECT_ID/$DOCKER_IMAGE_NAME:$GITHUB_SHA&quot;</span></span>
<span data-line> </span>
<span data-line><span>    # Deploy : update-container로 업데이트 요청</span></span>
<span data-line><span>    - name: Deploy</span></span>
<span data-line><span>      run: |-</span></span>
<span data-line><span>        gcloud compute instances update-container &quot;$GCE_INSTANCE&quot; \</span></span>
<span data-line><span>          --zone &quot;$GCE_INSTANCE_ZONE&quot; \</span></span>
<span data-line><span>          --container-image &quot;gcr.io/$PROJECT_ID/$DOCKER_IMAGE_NAME:$GITHUB_SHA&quot;</span></span></code></pre></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="docker-compose">Docker Compose<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#docker-compose" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>여러 Docker Image를 동시에 실행해야 한다면?
<ul>
<li>ex: DB Container + Web Service 동시 실행</li>
</ul>
</li>
<li>docker compose를 사용해 여러 컨테이너를 동시에 실행할 수 있음</li>
<li>실행하는 컨테이너들의 실행 순서, 의존도를 관리할 수 있음</li>
<li>docker-compose.yml 파일에 작성</li>
</ul>
<h1 id="logging">Logging<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#logging" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<h2 id="logging-basics">Logging Basics<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#logging-basics" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>데이터의 종류
<ul>
<li>DB Data : DB에 저장
<ul>
<li>서비스 로그</li>
<li>서비스 운영을 위해 필요한 데이터</li>
<li>고객 가입일, 물건 구매 기록 등</li>
</ul>
</li>
<li>사용자 행동 Data: 주로 Object Storage, Data Warehouse에 저장
<ul>
<li>유저 행동 로그</li>
<li>서비스에 반드시 필요한 내용은 아님</li>
<li>그러나 더 좋은 제품을 만들기 위해 or 데이터 분석시 필요</li>
<li>앱 or 웹에서 유저가 어떤 행동을 하는지를 나타내는 데이터</li>
<li>Click, View, Swipe 등</li>
</ul>
</li>
<li>인프라 Data(metric)
<ul>
<li>백엔드 웹 서버가 제대로 동작하고 있는지 확인하는 데이터</li>
<li>Request 수, Response 수, DB 부하 등</li>
</ul>
</li>
<li>Metric
<ul>
<li>값을 측정할 때 사용</li>
<li>CPU, Memory 등</li>
</ul>
</li>
<li>Log
<ul>
<li>운영 관점에서 알아야 하는 데이터를 남길 때 사용</li>
<li>함수 호출 기록, 예외처리 기록 등</li>
</ul>
</li>
<li>Trace
<ul>
<li>개발 관적에서 알아야 하는 것</li>
<li>Exception Trace</li>
</ul>
</li>
<li>데이터 적재 방식
<ul>
<li>DB(RDB)
<ul>
<li>실제 서비스용 DB, 비지니스와 연관된 중요 정보
<ul>
<li>고객 정보, 주문 요청</li>
</ul>
</li>
<li>행렬로 구성</li>
<li>My SQL, PostgreSQL 등</li>
</ul>
</li>
<li>DB(NoSQL, Not Only SQL)
<ul>
<li>Elasticsearch, LogStach or Fluent, Kibana에서 활용하는 경우(스키마에 덜 민감)</li>
<li>데이터가 많아지며 RDBMS로 트래픽 감당이 어려워서 개발됨</li>
<li>Key-Value Store, Document, Column Family, Graph 등</li>
<li>JSON과 유사한 형태, XML 등도 활용 됨</li>
<li>MongoDB 등</li>
</ul>
</li>
<li>ObjectStorage
<ul>
<li>S3, Cloud Storage에 파일 형태로 저장, 어떤 형태의 파일이라도 저장할 수 있는 저장소</li>
<li>csv, parquent, json, 이미지, 음성 등</li>
<li>별도 DB나 Data Warehouse에 옮기는 작업 필요</li>
</ul>
</li>
<li>Data Warehouse
<ul>
<li>데이터 분석시 활용, 여러 공간에 저장된 데이터를 한 곳으로 저장(데이터 창고)</li>
<li>RDBMS와 같은 SQL을 사용하나 성능이 더 좋은 편</li>
<li>AWS Redshift, GCP BigQuery, Snowflake 등</li>
<li>RDB, NoSQL,Object Storage 등에 저장된 데이터를 한 곳으로 옮겨서 처리</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="logging-in-python">Logging in python<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#logging-in-python" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>
<p>logging</p>
<ul>
<li>파이썬 기본 모듈</li>
</ul>
</li>
<li>
<p>log level</p>



































<div class="table-container"><table><thead><tr><th>Level</th><th>Value</th><th>Remark</th></tr></thead><tbody><tr><td>DEBUG</td><td>10</td><td>문제 해결에 필요한 자세한 정보를 공유</td></tr><tr><td>INFO</td><td>20</td><td>작업이 정상적으로 작동하고 있는 경우</td></tr><tr><td>WARNING</td><td>30</td><td>예상하지 못한 일이거나 발생 가능한 문제일 경우</td></tr><tr><td>ERROR</td><td>40</td><td>프로그램이 함수를 실행할 수 없는 심각한 상황</td></tr><tr><td>CRITICAL</td><td>50</td><td>프로그램이 동작할 수 없는 심각한 문</td></tr></tbody></table></div>
</li>
<li>
<p>Python Logging Component</p>
<ul>
<li>Loggers
<ul>
<li>Log를 생성하는 method 제공(logger.info() 등)</li>
</ul>
</li>
<li>Handlers
<ul>
<li>Logger에서 만들어진 Log를 적절한 위치로 전송(파일 저장 또는 Console 출력 등)</li>
</ul>
</li>
<li>Filters</li>
<li>Formatters
<ul>
<li>최종적으로 Log에 출력될 Format 설정</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="online-serving-loggingbig-query">Online Serving Logging(Big Query)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#online-serving-loggingbig-query" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>Big Query
<ul>
<li>GCP의 Data Warehouse</li>
<li>데이터 분석을 위한 도구로 Apache Spark의 대용으로 활용 가능</li>
<li>Firebase, Google Analytics4와 연동되어 많은 회사에서 사용 중</li>
<li>데이터를 조회할 때 마다 비용 발생
<ul>
<li>파티션 설정으로 모든 데이터가 아닌 일부 데이터만을 조회할 수 있음(비용 절감)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="bentoml">BentoML<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#bentoml" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<h2 id="intro">Intro<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#intro" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>FastAPI로 직접 ML 서버 개발</p>
<p>→ 1~2개의 모델을 만들 때는 직접 개발 가능</p>
<p>그러나 30~50개의 모델을 만들어야 한다면?</p>
<p>많은 모델을 만들다 보니 반복되는 작업이 존재(Config, FastAPI 설정 등)</p>
<p>→ 추상화가 불가능할까?</p>
<p>더 쉬운 개발을 위해 Serving에 특화된 라이브러리를 원하게 됨</p>
<p>→ BentoML</p>
<h2 id="bentoml-소개">BentoML 소개<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#bentoml-소개" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>Artifact, Asset 등 사이즈가 큰 파일을 패키징, Cloud Service에 지속적인 배포를 위한 많은 작업 등을 CLI 명령어로 진행할 수 있게 하여 문제의 복잡도를 낮춤</li>
<li>Python Logging Module로 Access Log, Prediction Log를 기본적으로 기록, Config로 Logging도 수정할 수 있으며 Prometheus 같은 Metric 수집 서버에 전송할 수 있음</li>
<li>Adaptive Micro Batching 방식을 사용하여 동시에 많은 요처이 들어와도 높은 처리량을 보여줌</li>
</ul>
<h2 id="bentoml-특징">BentoML 특징<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#bentoml-특징" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>쉬운 사용성</li>
<li>Online &amp; Ofline Serving 지원</li>
<li>Tensorflow, PyTorch, Keras, XGBoost 등 Major 프레임워크 지원</li>
<li>Docker, Kubernetes, AWS, Azure 등의 비포 환경 지원 및 가이드 제공</li>
<li>Flask 서버 대비 100배 처리량</li>
<li>모델 저장소(yatai) 웹 대시보드 제공</li>
<li>데이터 사이언스와 DevOps 사이의 간격을 이어주며 높은 성능의 Serving이 가능</li>
</ul>
<h2 id="bentoml-설치">BentoML 설치<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#bentoml-설치" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>Python 3.6 이상 지원</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>pip install bentoml</span></span></code></pre></figure>
<h2 id="bentoml-사용-flow">BentoML 사용 Flow<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#bentoml-사용-flow" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>모델 학습 코드 생성</li>
<li>Prediction Service Class 생성</li>
<li>Prediction Service 모델 저장(pack)</li>
<li>(Local)Serving</li>
<li>Docker Image Build(컨테이너화)</li>
<li>Serving 배포</li>
</ul>
<h2 id="bentoml-artifact-metadata-접근-방법">BentoML Artifact Metadata 접근 방법<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#bentoml-artifact-metadata-접근-방법" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>
<p>by CLI</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>bentoml get model:version</span></span></code></pre></figure>
</li>
<li>
<p>by REST API</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>serverip:serverport/metadata</span></span></code></pre></figure>
</li>
<li>
<p>by Python</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Python" data-theme="github-dark"><code data-language="Python" data-theme="github-dark" style="display:grid;"><span data-line><span>from bentoml import load</span></span>
<span data-line><span>svc = load('path_to_bento_service')</span></span>
<span data-line><span>print(svc.artifacts['model'].metadata)</span></span></code></pre></figure>
</li>
</ul>
<h2 id="bentoml-api-functions-adapters">BentoML API Functions, Adapters<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#bentoml-api-functions-adapters" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>BentoService API : Client가 예측 서비스에 접근하기 위한 end point를 생성</li>
<li>Adapter : input/output을 추상화해서 중간 부분을 연경하는 layer
<ul>
<li>csv 파일 형식으로 예측 요청한 경우 ⇒ DataFrame Input을 사용하고 있으면 내부적으로 pandas의 DataFrame객체로 변환하고 API함수에 전달</li>
</ul>
</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Python" data-theme="github-dark"><code data-language="Python" data-theme="github-dark" style="display:grid;"><span data-line><span>from my_lib import preprocessing, postprocessing, fetch_user_profile_fome_db</span></span>
<span data-line> </span>
<span data-line><span>class ExamplePredictionService(bentoml.BentoService):</span></span>
<span data-line><span>	@bentoml.api(input=DataframeInput(), batch=True)</span></span>
<span data-line><span>	def predict(self, df):</span></span>
<span data-line><span>		user_profile_column = fetch_user_profile_fome_db(df['user_id'])</span></span>
<span data-line><span>		df['user_profile'] = user_profile_column</span></span>
<span data-line><span>		model_input = preprocessing(df)</span></span>
<span data-line><span>		model_output = self.artifacts.model.predict(model_input)</span></span>
<span data-line><span>		return postprocessing(model_output)</span></span></code></pre></figure>
<h2 id="retrieving-bentoservice">Retrieving BentoService<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#retrieving-bentoservice" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>학습모델 저장 후, artifact bundle을 찾을 수 있음</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>bentoml retrieve ModelServe --target_dir=~/bentoml_bundle/</span></span></code></pre></figure>
<h1 id="airflow">Airflow<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#airflow" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<blockquote class="callout info" data-callout="info">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>버킷플레이스 Airflow 도입기 - 오늘의집 블로그 </p></div>
                  
                </div>
<div class="callout-content">
<div class="callout-content-inner">
<p>탁월한 데이터플랫폼을 위한 Airflow 도입기<br/>
<a href="https://www.bucketplace.com/post/2021-04-13-%EB%B2%84%ED%82%B7%ED%94%8C%EB%A0%88%EC%9D%B4%EC%8A%A4-airflow-%EB%8F%84%EC%9E%85%EA%B8%B0/" class="external">https://www.bucketplace.com/post/2021-04-13-%EB%B2%84%ED%82%B7%ED%94%8C%EB%A0%88%EC%9D%B4%EC%8A%A4-airflow-%EB%8F%84%EC%9E%85%EA%B8%B0/<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
</div>
</div>
</blockquote>
<blockquote class="callout info" data-callout="info">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>Kubernetes를 이용한 효율적인 데이터 엔지니어링(Airflow on Kubernetes VS Airflow Kubernetes Executor) - 1 </p></div>
                  
                </div>
<div class="callout-content">
<div class="callout-content-inner">
<p>들어가며 안녕하세요.<br/>
<a href="https://engineering.linecorp.com/ko/blog/data-engineering-with-airflow-k8s-1/" class="external">https://engineering.linecorp.com/ko/blog/data-engineering-with-airflow-k8s-1/<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
</div>
</div>
</blockquote>
<blockquote class="callout info" data-callout="info">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>쏘카 데이터 그룹 - Airflow와 함께한 데이터 환경 구축기(feat. Airflow on Kubernetes) </p></div>
                  
                </div>
<div class="callout-content">
<div class="callout-content-inner">
<p>지난 3년간 Airflow 구축 및 운영기록<br/>
<a href="https://tech.socarcorp.kr/data/2021/06/01/data-engineering-with-airflow.html" class="external">https://tech.socarcorp.kr/data/2021/06/01/data-engineering-with-airflow.html<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
</div>
</div>
</blockquote>
<blockquote class="callout info" data-callout="info">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>Airflow Executors | Astronomer Documentation </p></div>
                  
                </div>
<div class="callout-content">
<div class="callout-content-inner">
<p>An introduction to the Apache Airflow Executors: Celery, Local, and Kubernetes.<br/>
<a href="https://docs.astronomer.io/learn/airflow-executors-explained" class="external">https://docs.astronomer.io/learn/airflow-executors-explained<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
</div>
</div>
</blockquote>
<h2 id="apach-airflow-소개">Apach Airflow 소개<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#apach-airflow-소개" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>Batch Process : 예약된 시간에 실행되는 프로세스
<ul>
<li>모델을 주기적으로 학습시키는 경우(Continuous Training) 필요</li>
<li>모델을 주기적으로 Serving하는 경우 필요</li>
</ul>
</li>
<li>기존 대표적인 Batch Process : Linux Crontab
<ul>
<li>아직도 간단하게 사용하기에 좋은 선택임</li>
<li>실행중 오류가 발생한 경우, 별도의 처리를 해주지 않음</li>
<li>과거 실행 이력 및 로그를 보기 어려움</li>
<li>여러 파일 실행이나 복잡한 파이프라인을 만들기 어려움</li>
</ul>
</li>
<li>Airflow
<ul>
<li>현재 스케줄링, 워크플로우 도구의 표준</li>
<li>Airbnb에서 개발</li>
<li>파이썬으로 스케줄링 및 파이프라인 작성</li>
<li>실패 시 알람, 재실행 시도</li>
<li>동시 실행 워커 수 지정</li>
<li>설정 및 변수 값 분리</li>
</ul>
</li>
</ul>
<h2 id="apach-airflow-설치">Apach Airflow 설치<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#apach-airflow-설치" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>Airflow 설치</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>pip install apache-airflow</span></span></code></pre></figure>
<h2 id="apach-airflow-사용">Apach Airflow 사용<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#apach-airflow-사용" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>Airflow 기본 디렉토리 설정</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>export AIRFLOW_HOME=.</span></span></code></pre></figure>
<ul>
<li>Airflow DB 초기화</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>airflow db init</span></span></code></pre></figure>
<ul>
<li>Airflow 어드민 계정 생성</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>airflow user create</span></span></code></pre></figure>
<ul>
<li>Airflow 웹서버 실행</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>airflow webserver</span></span></code></pre></figure>
<ul>
<li>Airflow 스케줄러 실행</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Bash" data-theme="github-dark"><code data-language="Bash" data-theme="github-dark" style="display:grid;"><span data-line><span>airflow scheduler</span></span></code></pre></figure>
<h2 id="dag와-task">DAG와 Task<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#dag와-task" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>DAG : 1개의 파이프라인
<ul>
<li>Variable : Airflow console에서 저장, DAG에서 활용</li>
<li>Connection &amp; Hook : 연결하기 위한 설정(My SQL, GCP)</li>
<li>Sensor : 외부 이벤트를 기다리며 특정 조건이 만족하면 실행</li>
<li>Marker</li>
<li>XComs : Task끼리 결과를 주고받기를 원하는 경우 사용</li>
</ul>
</li>
<li>Task : DAG 내에서 실행할 작업</li>
</ul>
<h2 id="apach-airflow-아키텍처와-활용방안">Apach Airflow 아키텍처와 활용방안<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#apach-airflow-아키텍처와-활용방안" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li>실제 회사에서의 구축 방법 사례
<ol>
<li>Managed Airflow(GCP COmposer, AWS MWAA)</li>
<li>VM + Docker Compose</li>
<li>Kubernetes + Helm</li>
</ol>
</li>
<li>Airflow는 데이터 엔지니어링에서 많이 사용하지만, ML Ops에서도 활용 가능
<ul>
<li>주기적인 실행이 필요한 경우</li>
<li>Batch Training</li>
<li>Batch Serving</li>
<li>Move MySQL to Data Warehous</li>
<li>Batch ETL for feature store</li>
</ul>
</li>
</ul>
<h1 id="ml-design-pattern">ML Design Pattern<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#ml-design-pattern" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<ul>
<li>ML의 특수성으로 별도의 디자인 패턴이 생김
<ul>
<li>Data, Model, Code</li>
</ul>
</li>
<li>큰 분류
<ul>
<li>Serving 패턴 : 모델을 Production 환경에 서빙하는 패턴</li>
<li>Training 패턴 : 모델을 학습하는 패턴</li>
<li>QA 패턴 : 모델의 성능을 Production 환경에서 평가하기 위한 패턴</li>
<li>Operation 패턴 : 모델을 운영하기 위한 패턴</li>
</ul>
</li>
</ul>
<h2 id="serving-패턴">Serving 패턴<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#serving-패턴" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>ML Model을 Production 환경에서 어떻게 사용 할 것인가?</p>
<ul>
<li>
<p>Web Single 패턴</p>
<ul>
<li>FastAPI, Flask 등으로 단일 REST API 생성</li>
</ul>
</li>
<li>
<p>Synchronuous 패턴</p>
<ul>
<li>동기로 실행</li>
<li>예측 결과에 따라 로직이 달라지는 경우</li>
<li>예측이 끝날 때 까지 프로세스를 block</li>
<li>예측 속도가 병목이 됨</li>
</ul>
</li>
<li>
<p>Asynchronous 패턴</p>
<ul>
<li>비동기로 실행, 응답을 바로 받을 필요가 없는 경우</li>
<li>클라이언트와 서버 사이에 메세지 큐를 추가</li>
<li>실시간 예측에는 적절하지 않음</li>
</ul>
</li>
<li>
<p>Microservice Vertical 패턴</p>
<ul>
<li>여러 모델이 순차적으로 연결되는 경우</li>
<li>각각 모델을 별도 서버로 배포, 동기적으로 순서대로 예측</li>
</ul>
</li>
<li>
<p>Microservice Horizontal 패턴</p>
<ul>
<li>하나의 request에 여러 모델을 병렬로 실행하고 싶은 경우</li>
</ul>
</li>
<li>
<p>Prediction Cache 패턴</p>
<ul>
<li>
<p>Request할 때 데이터를 저장하고 예측 결과도 별도로 저장해야 하는 경우</p>
</li>
<li>
<p>예측 결과가 자주 변경되지 않는 경우</p>
</li>
<li>
<p>주기적 삭제 로직 필요</p>
</li>
</ul>
</li>
<li>
<p>Training 패턴</p>
<ul>
<li>학습 파이프라인 구성을 위한 패턴</li>
<li>Batch Training 패턴
<ul>
<li>주기적으로 학습해야 하는 경우</li>
<li>스케줄링 서버 필요</li>
</ul>
</li>
<li>Pipeline Training 패턴
<ul>
<li>
<p>학습 파이프라인 단계를 분리해 각각을 선택하고 재사용할 수 있도록 만드는 경우</p>
</li>
<li>
<p>Batch Training 패턴의 응용</p>
</li>
<li>
<p>각 작업을 개별 리소스로 분할</p>
</li>
<li>
<p>시간이 많이 걸리는 작업은 자주 실행, 다른 작업은 적게 실행</p>
</li>
<li>
<p>이전 작업의 실행 결과가 후속 작업의 input</p>
</li>
<li>
<p>중간중간 결과를 data warehouse에 저장</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>QA 패턴</p>
<ul>
<li>예측 서버와 모델의 성능 평가를 위한 패턴</li>
<li>Shadow AB Test 패턴
<ul>
<li>새로운 예측 모델이 Production 환경에서 잘 동작하는지 확인하고 싶은 경우</li>
<li>새로운 예측 서버가 Production 환경의 부하를 잘 견디는지 확인하고 싶은 경우</li>
<li>request가 들어온 경우 기존 모델과 새로운 모델 모두에게 전달, 기존 모델 서버만 response</li>
<li>새로운 예측 서버에 대한 비용 발생</li>
</ul>
</li>
<li>Online AB Test 패턴
<ul>
<li>새로운 예측 모델이 Production 환경에서 잘 동작하는지 확인하고 싶은 경우</li>
<li>새로운 예측 서버가 Production 환경의 부하를 잘 견디는지 확인하고 싶은 경우</li>
<li>Shadow AB Test 패턴과 비슷한 방식</li>
<li>Request가 들어오면 지정된 비율(ex 1:1)로 트래픽을 나누어 절반은 기존, 절만은 새로운 모델로 예측(초반엔 9:1이 적당)</li>
<li>새로운 예측 서버에 대한 비용 발생</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Operation 패턴</p>
<ul>
<li>Model in image 패턴
<ul>
<li>서비스 환경과 모델을 통합해서 관리하고 싶은 경우</li>
<li>Docker Image 안에 모델이 저장되어 있는 경우</li>
<li>모델 수정이 빈번한 경우, Docker Image Build를 계속 수행해야 함</li>
</ul>
</li>
<li>Model Load 패턴
<ul>
<li>Docker Image와 모델 파일을 분리하고 싶은 경우</li>
<li>모델 업데이트가 빈번한 경우</li>
<li>동일 서버 이미지, 다수 모델을 사용하는 경우</li>
<li>모델파일은 Object Storage에 업로드하고 프로세스를 시작할 때 모델을 다운</li>
<li>서비스 시작이 오래걸릴 수 있음, 서버 이미지와 모델관리 필요</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Prediction Log 패턴</p>
<ul>
<li>서비스 개선을 위해 예측, 지연시간 로그를 사용하려고 할 경우</li>
<li>프로세스에서 로그를 저장하지 않고, 메세지 시스템으로 넘겨서 프로세스가 저장에 신경쓰는 시간을 줄임</li>
<li>로그가 많아지면 저장 비용이 발생</li>
</ul>
</li>
<li>
<p>Condition Based Serving 패턴</p>
<ul>
<li>상황에 따라 예측해야 하는 대상이 다양한 경우(ex 국가에 따른 언어모델)</li>
<li>룰베이스 방식으로 상황에 따라 모델을 선택해야 하는 경우</li>
<li>모델 수에 따라 운영 비용 증가</li>
</ul>
</li>
</ul></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.2,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" class="toc-header" aria-controls="toc-content" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><ul class="toc-content overflow" id="list-1"><li class="depth-0"><a href="#docker" data-for="docker">Docker</a></li><li class="depth-1"><a href="#docker-소개" data-for="docker-소개">Docker 소개</a></li><li class="depth-1"><a href="#docker-image-저장--배포" data-for="docker-image-저장--배포">Docker Image 저장 &amp; 배포</a></li><li class="depth-1"><a href="#docker-compose" data-for="docker-compose">Docker Compose</a></li><li class="depth-0"><a href="#logging" data-for="logging">Logging</a></li><li class="depth-1"><a href="#logging-basics" data-for="logging-basics">Logging Basics</a></li><li class="depth-1"><a href="#logging-in-python" data-for="logging-in-python">Logging in python</a></li><li class="depth-1"><a href="#online-serving-loggingbig-query" data-for="online-serving-loggingbig-query">Online Serving Logging(Big Query)</a></li><li class="depth-0"><a href="#bentoml" data-for="bentoml">BentoML</a></li><li class="depth-1"><a href="#intro" data-for="intro">Intro</a></li><li class="depth-1"><a href="#bentoml-소개" data-for="bentoml-소개">BentoML 소개</a></li><li class="depth-1"><a href="#bentoml-특징" data-for="bentoml-특징">BentoML 특징</a></li><li class="depth-1"><a href="#bentoml-설치" data-for="bentoml-설치">BentoML 설치</a></li><li class="depth-1"><a href="#bentoml-사용-flow" data-for="bentoml-사용-flow">BentoML 사용 Flow</a></li><li class="depth-1"><a href="#bentoml-artifact-metadata-접근-방법" data-for="bentoml-artifact-metadata-접근-방법">BentoML Artifact Metadata 접근 방법</a></li><li class="depth-1"><a href="#bentoml-api-functions-adapters" data-for="bentoml-api-functions-adapters">BentoML API Functions, Adapters</a></li><li class="depth-1"><a href="#retrieving-bentoservice" data-for="retrieving-bentoservice">Retrieving BentoService</a></li><li class="depth-0"><a href="#airflow" data-for="airflow">Airflow</a></li><li class="depth-1"><a href="#apach-airflow-소개" data-for="apach-airflow-소개">Apach Airflow 소개</a></li><li class="depth-1"><a href="#apach-airflow-설치" data-for="apach-airflow-설치">Apach Airflow 설치</a></li><li class="depth-1"><a href="#apach-airflow-사용" data-for="apach-airflow-사용">Apach Airflow 사용</a></li><li class="depth-1"><a href="#dag와-task" data-for="dag와-task">DAG와 Task</a></li><li class="depth-1"><a href="#apach-airflow-아키텍처와-활용방안" data-for="apach-airflow-아키텍처와-활용방안">Apach Airflow 아키텍처와 활용방안</a></li><li class="depth-0"><a href="#ml-design-pattern" data-for="ml-design-pattern">ML Design Pattern</a></li><li class="depth-1"><a href="#serving-패턴" data-for="serving-패턴">Serving 패턴</a></li><li class="overflow-end"></li></ul></div><div class="backlinks"><h3>Backlinks</h3><ul id="list-2" class="overflow"><li><a href="../../Personal/Naver-Connect---Boostcamp-AI-Tech-4기/Naver-Connect---Boostcamp-AI-Tech-4기" class="internal">Naver Connect - Boostcamp AI Tech 4기</a></li><li class="overflow-end"></li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.5.1</a> © 2025</p><ul><li><a href="https://github.com/404Vector">GitHub</a></li></ul></footer></div></div></body><script type="application/javascript">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module">function f(i,e){if(!i)return;function r(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function t(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}i?.addEventListener("click",r),window.addCleanup(()=>i?.removeEventListener("click",r)),document.addEventListener("keydown",t),window.addCleanup(()=>document.removeEventListener("keydown",t))}function y(i){for(;i.firstChild;)i.removeChild(i.firstChild)}var h=class{constructor(e,r){this.container=e;this.content=r;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),r=this.onMouseMove.bind(this),t=this.onMouseUp.bind(this),o=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",t),window.addEventListener("resize",o),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",r),()=>document.removeEventListener("mouseup",t),()=>window.removeEventListener("resize",o))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let r=this.createButton("+",()=>this.zoom(.1)),t=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(t),e.appendChild(o),e.appendChild(r),this.container.appendChild(e)}createButton(e,r){let t=document.createElement("button");return t.textContent=e,t.className="mermaid-control-button",t.addEventListener("click",r),window.addCleanup(()=>t.removeEventListener("click",r)),t}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}zoom(e){let r=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),t=this.content.getBoundingClientRect(),o=t.width/2,n=t.height/2,c=r-this.scale;this.currentPan.x-=o*c,this.currentPan.y-=n*c,this.scale=r,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){this.scale=1;let e=this.content.querySelector("svg");this.currentPan={x:e.getBoundingClientRect().width/2,y:e.getBoundingClientRect().height/2},this.updateTransform()}},C=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],E;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;E||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let r=E.default,t=new WeakMap;for(let n of e)t.set(n,n.innerText);async function o(){for(let s of e){s.removeAttribute("data-processed");let a=t.get(s);a&&(s.innerHTML=a)}let n=C.reduce((s,a)=>(s[a]=window.getComputedStyle(document.documentElement).getPropertyValue(a),s),{}),c=document.documentElement.getAttribute("saved-theme")==="dark";r.initialize({startOnLoad:!1,securityLevel:"loose",theme:c?"dark":"base",themeVariables:{fontFamily:n["--codeFont"],primaryColor:n["--light"],primaryTextColor:n["--darkgray"],primaryBorderColor:n["--tertiary"],lineColor:n["--darkgray"],secondaryColor:n["--secondary"],tertiaryColor:n["--tertiary"],clusterBkg:n["--light"],edgeLabelBackground:n["--highlight"]}}),await r.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let n=0;n<e.length;n++){let v=function(){let g=l.querySelector("#mermaid-space"),m=l.querySelector(".mermaid-content");if(!m)return;y(m);let w=c.querySelector("svg").cloneNode(!0);m.appendChild(w),l.classList.add("active"),g.style.cursor="grab",u=new h(g,m)},M=function(){l.classList.remove("active"),u?.cleanup(),u=null},c=e[n],s=c.parentElement,a=s.querySelector(".clipboard-button"),d=s.querySelector(".expand-button"),p=window.getComputedStyle(a),L=a.offsetWidth+parseFloat(p.marginLeft||"0")+parseFloat(p.marginRight||"0");d.style.right=`calc(${L}px + 0.3rem)`,s.prepend(d);let l=s.querySelector("#mermaid-container");if(!l)return;let u=null;d.addEventListener("click",v),f(l,M),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",v)})}});
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="../../postscript.js" type="module"></script></html>